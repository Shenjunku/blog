---
title: HTTP计算机网络
date: 2022-8-02
sidebar: 'auto'
categories:
 - 前端
tags:
 - 前端
---
#### 1. 计算机网络基础

- **网络分层模型**
  - **OSI 七层模型**：物理层 → 数据链路层 → 网络层 → 传输层 → 会话层 → 表示层 → 应用层（理论模型，便于理解）。
  - **TCP/IP 四层模型**：网络接口层 → 网络层（IP） → 传输层（TCP/UDP） → 应用层（HTTP、DNS、FTP 等）（实际应用模型）。
- **核心协议**
  - **IP 协议**：网络层，负责跨网络的数据包路由（如 IP 地址、子网掩码）。
  - **TCP 协议**：传输层，面向连接、可靠传输（三次握手建立连接，四次挥手断开连接）、拥塞控制。
  - **UDP 协议**：传输层，无连接、不可靠但高效（适用于实时通信，如视频 / 语音通话）。
  #### 2. HTTP 核心知识

- **HTTP 基本概念**

  - 超文本传输协议（HyperText Transfer Protocol），基于 TCP 的应用层协议，用于客户端（浏览器）与服务器之间的通信。
  - 特点：无状态（每次请求独立，不记录历史）、可扩展（通过 Headers 扩展功能）。

- **HTTP 请求与响应结构**

  - 请求报文  ：
    - 起始行：`方法 URL 版本`（如 `GET /api/user HTTP/1.1`）。
    - 请求头（Headers）：键值对，如 `Host`、`User-Agent`、`Cookie`、`Content-Type` 等。
    - 请求体（Body）：POST/PUT 等方法携带的数据（如表单、JSON）。

  - 响应报文 ：
    - 起始行：`版本 状态码 原因短语`（如 `HTTP/1.1 200 OK`）。
    - 响应头（Headers）：如 `Content-Type`、`Cache-Control`、`Set-Cookie` 等。
    - 响应体（Body）：服务器返回的数据（如 HTML、JSON）。

- **HTTP 方法（语义）**

  - `GET`：获取资源（无请求体，参数在 URL）。
  - `POST`：提交资源（有请求体，用于创建 / 提交数据）。
  - `PUT`：全量更新资源（幂等，多次执行结果一致）。
  - `PATCH`：部分更新资源。
  - `DELETE`：删除资源。
  - 其他：`HEAD`（仅返回响应头）、`OPTIONS`（跨域预检）等。

- **HTTP 状态码**

  - 1xx（信息）：`100 Continue`（继续发送请求体）。
  - 2xx（成功）：`200 OK`、`204 No Content`（无响应体）、`206 Partial Content`（部分请求，用于断点续传）。
  - 3xx（重定向）：`301 Moved Permanently`（永久重定向）、`302 Found`（临时重定向）、`304 Not Modified`（缓存命中，无需返回资源）。
  - 4xx（客户端错误）：`400 Bad Request`（请求格式错误）、`401 Unauthorized`（未认证）、`403 Forbidden`（权限不足）、`404 Not Found`（资源不存在）、`405 Method Not Allowed`（方法不支持）。
  - 5xx（服务器错误）：`500 Internal Server Error`（服务器异常）、`502 Bad Gateway`（网关错误）、`503 Service Unavailable`（服务暂时不可用）。

- **HTTP 缓存机制**（前端性能优化核心）

  - 强缓存：客户端直接使用本地缓存，不请求服务器。
    - 控制头：`Cache-Control`（优先级更高）、`Expires`（HTTP/1.0）。
    - `Cache-Control` 常用值：`max-age=3600`（缓存有效 3600 秒）、`no-cache`（需协商缓存）、`no-store`（不缓存）、`public`（允许代理缓存）、`private`（仅客户端缓存）。

  - 协商缓存 ：客户端发送请求，服务器判断是否使用缓存。
    - 验证头：`Last-Modified`（资源最后修改时间） + `If-Modified-Since`（请求时携带，验证是否修改）；`ETag`（资源唯一标识） + `If-None-Match`（请求时携带，验证标识是否一致）。
  - 缓存流程：先查强缓存（未过期直接用）→ 强缓存失效 → 查协商缓存（服务器允许则用缓存，返回 304）→ 协商缓存失效 → 请求新资源（返回 200）。

- **HTTPS**

  - 基于 HTTP + TLS/SSL 的加密传输协议，解决 HTTP 明文传输的安全问题（窃听、篡改、冒充）。
  - 核心原理：
    1. 客户端与服务器协商加密算法（握手阶段）。
    2. 服务器发送证书（含公钥），客户端验证证书合法性。
    3. 客户端生成对称加密密钥，用服务器公钥加密后发送给服务器。
    4. 双方使用对称密钥加密传输数据（对称加密效率高，公钥加密用于安全传递对称密钥）

**HTTP 版本差异**

| 版本     | 核心改进                                                     | 特点                                           |
| -------- | ------------------------------------------------------------ | ---------------------------------------------- |
| HTTP/1.0 | 基础请求响应                                                 | 短连接（每次请求新建 TCP 连接）、无流水线      |
| HTTP/1.1 | 长连接（`Connection: keep-alive`）、流水线（可并发发送请求）、Chunked 传输 | 减少 TCP 连接开销，但同域名最多 6-8 个并发连接 |
| HTTP/2   | 二进制帧、多路复用（单连接并发请求）、服务器推送、头部压缩   | 性能大幅提升，解决 1.1 的队头阻塞问题          |
| HTTP/3   | 基于 QUIC 协议（UDP 之上）、更快的握手、天然抗队头阻塞       | 进一步优化传输效率，适用于弱网络环境           |

**跨域问题**

- 原因：浏览器的同源策略（Same-Origin Policy）限制不同源（协议、域名、端口任一不同）的资源交互。
- 解决方式：
  - **CORS**（跨域资源共享）：服务器设置响应头 `Access-Control-Allow-Origin` 等。
  - **JSONP**：利用 `<script>` 标签跨域特性，仅支持 GET。
  - **代理**：开发环境用 webpack-dev-server 代理，生产环境用 Nginx 反向代理。

  
#### GET和POST的区别

- 1.GET在浏览器回退不会再次请求，POST会再次提交请求

- 2.GET请求会被浏览器主动缓存，POST不会，要手动设置 

- 3.GET请求参数会被完整保留在浏览器历史记录里，POST中的参数不会 

- 4.GET请求在URL中传送的参数是有长度限制的，而POST没有限制

- 5.GET参数通过URL传递，POST放在Request body中 

- 6.GET参数暴露在地址栏不安全，POST放在报文内部更安全 

- 7.GET一般用于查询信息，POST一般用于提交某种信息进行某些修改操作

- 8.GET产生一个TCP数据包；POST产生两个TCP数据包

**HTTP与HTTPS的区别**
##### HTTP
- HTTP的URL开头是http://
- HTTP的默认端口是80
- HTTP是超文本传输协议，信息是明文传输，不太安全
- HTTP不需要证书
##### HTTPS
- HTTPS的URL是https://
- HTTPS的默认端口是443
- HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比较安全
- HTTPS需要CA机构颁发的SSL证书

**浏览器从输入url到渲染页面，发生了什么？**

- 通过DNS解析域名的实际IP地址
- 检查浏览器是否有缓存
- 与服务器建立 TCP 连接。
- 发送HTTP请求
- 服务器处理请求并返回
- 浏览器解析渲染页面

  1. 解析HTML形成DOM树
  2. 解析CSS形成CSSOM 树
  3. 合并DOM树和CSSOM树形成渲染树
  4. 浏览器开始渲染并绘制页面

**TCP 三次握手和四次挥手的过程？为什么需要三次握手？**

- 三次握手：
  1. 客户端 → 服务器：SYN（请求建立连接）。
  2. 服务器 → 客户端：SYN+ACK（同意连接，请求客户端确认）。
  3. 客户端 → 服务器：ACK（确认，连接建立）。
- 目的：确保双方收发能力正常（防止过期的连接请求被服务器接受，导致资源浪费）。
- 四次挥手：客户端和服务器分别发送 FIN（终止连接）和 ACK（确认），因半关闭状态（一方可继续发送数据）需四次。

**前端有哪些性能优化手段？**

- **减少HTTP请求**：合并文件（CSS/JS）、雪碧图、内联小资源10。
- **使用缓存**：合理设置HTTP缓存头10、应用缓存策略（Service Worker）7。
- **资源压缩**：开启Gzip/Brotli压缩10、压缩图片、使用WebP格式、代码压缩混淆。
- **使用CDN**：分发静态资源到离用户更近的节点210。
- **代码层面**：防抖节流、懒加载、异步加载（defer/async）、使用requestAnimationFrame。